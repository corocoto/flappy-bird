{"version":3,"sources":["containers/Menu/Scene/Scene.module.css","assets/images/bg.png","assets/images/bird.png","assets/images/fg.png","assets/images/pipeNorth.png","assets/images/pipeSouth.png","assets/sounds/fly.mp3","assets/sounds/score.mp3","containers/Menu/Scene/Scene.jsx"],"names":["module","exports","Scene","props","canvasRef","React","createRef","imgs","Background","Bird","Ground","PipeNorth","PipeSouth","sounds","FlySound","ScoreSound","state","gap","gravity","keyDownPressHandler","bind","startAnimationLoop","this","initCtx","setStarterVals","sceneObjs","initSceneObjs","Promise","all","then","initSceneSounds","window","addEventListener","current","ctx","getContext","bX","bY","scoreCount","pipe","x","width","y","forEach","img","imgName","getName","Image","src","push","onload","resolve","sound","Audio","file","split","pop","shift","fly","play","drawImage","bg","i","length","constant","pipeNorth","height","pipeSouth","Math","floor","random","bird","fg","cancelAnimationFrame","requestID","score","fillStyle","font","fillText","requestAnimationFrame","removeEventListeners","removeEventListener","className","classes","ref","Component"],"mappings":"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","file":"static/js/3.781f2ec2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Scene\":\"Scene_Scene__5AIfT\"};","module.exports = __webpack_public_path__ + \"static/media/bg.f97dc14b.png\";","module.exports = __webpack_public_path__ + \"static/media/bird.cab12c37.png\";","module.exports = __webpack_public_path__ + \"static/media/fg.6ecbd537.png\";","module.exports = __webpack_public_path__ + \"static/media/pipeNorth.07cd2335.png\";","module.exports = __webpack_public_path__ + \"static/media/pipeSouth.f7914292.png\";","module.exports = __webpack_public_path__ + \"static/media/fly.115aeb7a.mp3\";","module.exports = __webpack_public_path__ + \"static/media/score.30b534d8.mp3\";","import React, {Component} from 'react';\r\nimport classes from './Scene.module.css';\r\n\r\n/* Images importing*/\r\nimport Background from '../../../assets/images/bg.png';\r\nimport Bird from '../../../assets/images/bird.png';\r\nimport Ground from '../../../assets/images/fg.png';\r\nimport PipeNorth from '../../../assets/images/pipeNorth.png';\r\nimport PipeSouth from '../../../assets/images/pipeSouth.png';\r\n\r\n/* Sounds importing */\r\nimport FlySound from '../../../assets/sounds/fly.mp3';\r\nimport ScoreSound from '../../../assets/sounds/score.mp3';\r\n\r\nexport default class Scene extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.canvasRef = React.createRef();\r\n        this.imgs = [Background, Bird, Ground, PipeNorth, PipeSouth];\r\n        this.sounds = [FlySound, ScoreSound];\r\n        this.state = {\r\n            gap: 80,\r\n            /* Gravitation */\r\n            gravity: 1.7\r\n        }\r\n        this.keyDownPressHandler = this.keyDownPressHandler.bind(this);\r\n        this.startAnimationLoop = this.startAnimationLoop.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.initCtx();\r\n        this.setStarterVals();\r\n        const sceneObjs = this.initSceneObjs();\r\n        Promise.all(sceneObjs).then(()=>{\r\n            this.initSceneSounds();\r\n            this.startAnimationLoop();\r\n            window.addEventListener('keydown', this.keyDownPressHandler);\r\n            this.canvasRef.current.addEventListener('touchstart', this.keyDownPressHandler);\r\n        });\r\n    }\r\n\r\n    initCtx(){\r\n        this.ctx = this.canvasRef.current.getContext('2d')\r\n    }\r\n\r\n    setStarterVals() {\r\n\r\n        /* Bird's position */\r\n        this.bX = 10;\r\n        this.bY = 150;\r\n\r\n        /* Starter score */\r\n        this.scoreCount = 0;\r\n\r\n\r\n        /* Pipe coordinates */\r\n        this.pipe = [];\r\n        this.pipe[0] = {\r\n            x: this.canvasRef.current.width,\r\n            y: 0,\r\n        };\r\n    }\r\n\r\n    initSceneObjs() {\r\n        const sceneObjs = [];\r\n        this.imgs.forEach(img => {\r\n            const imgName = this.getName(img);\r\n            this[imgName] = new Image();\r\n            this[imgName].src = img;\r\n            sceneObjs.push(this[imgName]);\r\n            this[imgName].onload = () => Promise.resolve();\r\n        });\r\n        return sceneObjs;\r\n    }\r\n\r\n    initSceneSounds() {\r\n        this.sounds.forEach(sound => this[this.getName(sound)] = new Audio(sound));\r\n    }\r\n\r\n    getName(file) {\r\n        return file.split('/').pop().split('.').shift();\r\n    }\r\n\r\n    keyDownPressHandler() {\r\n        this.bY -= 30;\r\n        this.fly.play();\r\n    }\r\n\r\n    startAnimationLoop() {\r\n        /* Draw background */\r\n        this.ctx.drawImage(this.bg, 0, 0);\r\n        for (let i = 0; i < this.pipe.length; i++) {\r\n            const constant = this.pipeNorth.height + this.state.gap;\r\n\r\n            /* Draw top pipe */\r\n            this.ctx.drawImage(this.pipeNorth, this.pipe[i].x, this.pipe[i].y);\r\n\r\n            /* Draw bottom pipe */\r\n            this.ctx.drawImage(this.pipeSouth, this.pipe[i].x, this.pipe[i].y + constant);\r\n\r\n            /* Move pipes */\r\n            this.pipe[i].x--;\r\n\r\n            /* Add new pipes */\r\n            if (this.pipe[i].x === 125) {\r\n                this.pipe.push({\r\n                    x: this.canvasRef.current.width,\r\n                    y: Math.floor(Math.random() * this.pipeNorth.height) - this.pipeNorth.height,\r\n                });\r\n            }\r\n\r\n            /* Bit about pipes */\r\n            if ((this.bX + this.bird.width >= this.pipe[i].x && this.bX <= this.pipe[i].x + this.pipeNorth.width &&\r\n                (this.bY <= this.pipe[i].y + this.pipeNorth.height || this.bY + this.bird.height >= this.pipe[i].y + constant))\r\n                || this.bY + this.bird.height >= this.canvasRef.current.height - this.fg.height) {\r\n                window.cancelAnimationFrame(this.requestID);\r\n                this.setStarterVals();\r\n                this.startAnimationLoop();\r\n                throw 'End of the game';\r\n            }\r\n\r\n            /* Change score */\r\n            if (this.pipe[i].x === 5) {\r\n                this.scoreCount++;\r\n                this.score.play();\r\n            }\r\n        }\r\n\r\n        /* Draw ground */\r\n        this.ctx.drawImage(this.fg, 0, this.canvasRef.current.height - this.fg.height);\r\n\r\n        /* Draw bird */\r\n        this.ctx.drawImage(this.bird, this.bX, this.bY);\r\n\r\n        this.bY += this.state.gravity;\r\n\r\n        /* Draw score */\r\n        this.ctx.fillStyle = '#000';\r\n        this.ctx.font = '16px Century Gothic';\r\n        this.ctx.fillText(`Score: ${this.scoreCount}`, 10, this.canvasRef.current.height - 20);\r\n        this.requestID = window.requestAnimationFrame(this.startAnimationLoop);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.removeEventListeners();\r\n    }\r\n\r\n    removeEventListeners(){\r\n        window.removeEventListener('keydown', this.keyDownPressHandler);\r\n        this.canvasRef.current.removeEventListener('touchstart', this.keyDownPressHandler);\r\n        window.cancelAnimationFrame(this.requestID);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <canvas\r\n                className={classes.Scene}\r\n                ref={this.canvasRef}\r\n                width='288'\r\n                height='512'\r\n            ></canvas>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\n"],"sourceRoot":""}