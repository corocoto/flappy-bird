(this["webpackJsonpflappy-bird"]=this["webpackJsonpflappy-bird"]||[]).push([[1],{29:function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){return!e||"object"!==a(e)&&"function"!==typeof e?r(t):e}function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=o(t);if(e){var r=o(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return h(this,i)}}i.r(e),i.d(e,"default",(function(){return w}));var u=i(0),p=i.n(u),f="Scene_Scene__2ORqK",l=i.p+"static/media/bg.093d36bb.png",y=i.p+"static/media/bird.71e31e9e.png",d=i.p+"static/media/fg.1aff9f5e.png",m=i.p+"static/media/pipeNorth.3e4cf42d.png",v=i.p+"static/media/pipeSouth.d354aa87.png",b=i.p+"static/media/fly.e734c795.mp3",g=i.p+"static/media/score.92d4be02.mp3",w=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(h,t);var e,i,o,a=c(h);function h(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(e=a.call(this,t)).canvasRef=p.a.createRef(),e.imgs=[l,y,d,m,v],e.sounds=[b,g],e.state={gap:80,gravity:1.7},e.keyDownPressHandler=e.keyDownPressHandler.bind(r(e)),e.startAnimationLoop=e.startAnimationLoop.bind(r(e)),e}return e=h,(i=[{key:"componentDidMount",value:function(){var t=this;this.initCtx(),this.setStarterVals();var e=this.initSceneObjs();Promise.all(e).then((function(){t.initSceneSounds(),t.startAnimationLoop(),window.addEventListener("keydown",t.keyDownPressHandler),t.canvasRef.current.addEventListener("touchstart",t.keyDownPressHandler)}))}},{key:"initCtx",value:function(){this.ctx=this.canvasRef.current.getContext("2d")}},{key:"setStarterVals",value:function(){this.bX=10,this.bY=150,this.scoreCount=0,this.pipe=[],this.pipe[0]={x:this.canvasRef.current.width,y:0}}},{key:"initSceneObjs",value:function(){var t=this,e=[];return this.imgs.forEach((function(i){var n=t.getName(i);t[n]=new Image,t[n].src=i,e.push(t[n]),t[n].onload=function(){return Promise.resolve()}})),e}},{key:"initSceneSounds",value:function(){var t=this;this.sounds.forEach((function(e){return t[t.getName(e)]=new Audio(e)}))}},{key:"getName",value:function(t){return t.split("/").pop().split(".").shift()}},{key:"keyDownPressHandler",value:function(){this.bY-=30,this.fly.play()}},{key:"startAnimationLoop",value:function(){this.ctx.drawImage(this.bg,0,0);for(var t=0;t<this.pipe.length;t++){var e=this.pipeNorth.height+this.state.gap;if(this.ctx.drawImage(this.pipeNorth,this.pipe[t].x,this.pipe[t].y),this.ctx.drawImage(this.pipeSouth,this.pipe[t].x,this.pipe[t].y+e),this.pipe[t].x--,125===this.pipe[t].x&&this.pipe.push({x:this.canvasRef.current.width,y:Math.floor(Math.random()*this.pipeNorth.height)-this.pipeNorth.height}),this.bX+this.bird.width>=this.pipe[t].x&&this.bX<=this.pipe[t].x+this.pipeNorth.width&&(this.bY<=this.pipe[t].y+this.pipeNorth.height||this.bY+this.bird.height>=this.pipe[t].y+e)||this.bY+this.bird.height>=this.canvasRef.current.height-this.fg.height)throw window.cancelAnimationFrame(this.requestID),this.setStarterVals(),this.startAnimationLoop(),"End of the game";5===this.pipe[t].x&&(this.scoreCount++,this.score.play())}this.ctx.drawImage(this.fg,0,this.canvasRef.current.height-this.fg.height),this.ctx.drawImage(this.bird,this.bX,this.bY),this.bY+=this.state.gravity,this.ctx.fillStyle="#000",this.ctx.font="16px Century Gothic",this.ctx.fillText("Score: ".concat(this.scoreCount),10,this.canvasRef.current.height-20),this.requestID=window.requestAnimationFrame(this.startAnimationLoop)}},{key:"componentWillUnmount",value:function(){this.removeEventListeners()}},{key:"removeEventListeners",value:function(){window.removeEventListener("keydown",this.keyDownPressHandler),this.canvasRef.current.removeEventListener("touchstart",this.keyDownPressHandler),window.cancelAnimationFrame(this.requestID)}},{key:"render",value:function(){return p.a.createElement("canvas",{className:f,ref:this.canvasRef,width:"288",height:"512"})}}])&&n(e.prototype,i),o&&n(e,o),h}(u.Component)}}]);
//# sourceMappingURL=SceneComponent.7566939f.chunk.js.map