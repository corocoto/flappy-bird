(this["webpackJsonpflappy-bird"]=this["webpackJsonpflappy-bird"]||[]).push([[1],{155:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return N}));var r=n(153),c=n(154),i=n(69),u=n.n(i),a=n(71),o=n(0),s=n.n(o),d="Scene_Scene__2ORqK",p=n(72),f=n.n(p),h=n.p+"static/media/bg.093d36bb.png",g=n.p+"static/media/bird.71e31e9e.png",l=n.p+"static/media/fg.1aff9f5e.png",w=n.p+"static/media/pipeNorth.3e4cf42d.png",m=n.p+"static/media/pipeSouth.d354aa87.png",b=n.p+"static/media/fly.e734c795.mp3",y=n.p+"static/media/score.92d4be02.mp3";n(142);function v(e){return new Promise((function(t,n){var r=new Image;r.addEventListener("load",(function(){return t(r)})),r.addEventListener("error",(function(e){return n(e)})),r.setAttribute("crossOrigin","anonymous"),r.src=e}))}function x(e){return new Audio(e)}var O,j,k,E,I,L,R,A=288,C=512,P={position:{x:10,y:150}},S=new Map([["background",v(h)],["bird",v(g)],["ground",v(l)],["topPipe",v(w)],["bottomPipe",v(m)]]),M=new Map([["fly",x(b)],["score",x(y)]]),F="#000",_="16px Century Gothic",q=function(e){return"Score: ".concat(e)},J=f()(P),N=function(){var e=Object(o.useRef)(null),t=Object(o.useRef)(),n=Object(o.useRef)([]),i=Object(o.useRef)(0),p=Object(o.useRef)(0),f=function(){var e=Object(a.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.get("background");case 2:return O=e.sent,e.next=5,S.get("bird");case 5:return j=e.sent,e.next=8,S.get("ground");case 8:return k=e.sent,e.next=11,S.get("topPipe");case 11:return E=e.sent,e.next=14,S.get("bottomPipe");case 14:I=e.sent;case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=Object(o.useCallback)((function(){var t;J.position=Object(c.a)({},P.position),i.current=0,n.current=[{x:null===(t=e.current)||void 0===t?void 0:t.width,y:0}]}),[]),g=Object(o.useCallback)((function(){if(t.current&&e.current){t.current.drawImage(O,0,0);for(var c=0;c<n.current.length;c++){var u=E.height+80;if(t.current.drawImage(E,n.current[c].x,n.current[c].y),t.current.drawImage(I,n.current[c].x,n.current[c].y+u),n.current[c].x--,125===n.current[c].x&&(n.current=[].concat(Object(r.a)(n.current),[{x:e.current.width,y:Math.floor(Math.random()*E.height)-E.height}])),J.position.x+j.width>=n.current[c].x&&J.position.x<=n.current[c].x+E.width&&(J.position.y<=n.current[c].y+E.height||J.position.y+j.height>=n.current[c].y+u)||J.position.y+j.height>=e.current.height-k.height)throw window.cancelAnimationFrame(p.current),h(),g(),"End of the game";5===n.current[c].x&&(i.current++,R.play())}t.current.drawImage(k,0,e.current.height-k.height),t.current.drawImage(j,J.position.x,J.position.y),J.position.y+=1.7,t.current.fillStyle=F,t.current.font=_,t.current.fillText(q(i.current),10,e.current.height-20),p.current=window.requestAnimationFrame(g)}}),[h]),l=Object(o.useCallback)((function(){var t;window.removeEventListener("keydown",w),null===(t=e.current)||void 0===t||t.removeEventListener("touchstart",w),window.cancelAnimationFrame(p.current)}),[p]),w=function(){J.position.y-=30,L.play()};return Object(o.useEffect)((function(){return e.current&&(t.current=e.current.getContext("2d")),h(),L=M.get("fly"),R=M.get("score"),Object(a.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:g(),window.addEventListener("keydown",w),null===(n=e.current)||void 0===n||n.addEventListener("touchstart",w);case 5:case"end":return t.stop()}}),t)})))(),function(){l()}}),[l,g,h]),s.a.createElement("canvas",{className:d,ref:e,width:A,height:C})}}}]);
//# sourceMappingURL=SceneComponent.088ca284.chunk.js.map