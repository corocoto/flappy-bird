(this["webpackJsonpflappy-bird"]=this["webpackJsonpflappy-bird"]||[]).push([[3],{37:function(t,e,i){t.exports={Scene:"Scene_Scene__5AIfT"}},38:function(t,e,i){t.exports=i.p+"static/media/bg.f97dc14b.png"},39:function(t,e,i){t.exports=i.p+"static/media/bird.cab12c37.png"},40:function(t,e,i){t.exports=i.p+"static/media/fg.6ecbd537.png"},41:function(t,e,i){t.exports=i.p+"static/media/pipeNorth.07cd2335.png"},42:function(t,e,i){t.exports=i.p+"static/media/pipeSouth.f7914292.png"},43:function(t,e,i){t.exports=i.p+"static/media/fly.115aeb7a.mp3"},44:function(t,e,i){t.exports=i.p+"static/media/score.30b534d8.mp3"},47:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return D}));var n=i(14),s=i(15),a=i(16),r=i(19),h=i(18),o=i(0),c=i.n(o),p=i(37),u=i.n(p),d=i(38),f=i.n(d),l=i(39),m=i.n(l),v=i(40),g=i.n(v),b=i(41),y=i.n(b),w=i(42),x=i.n(w),k=i(43),S=i.n(k),L=i(44),A=i.n(L),D=function(t){Object(r.a)(i,t);var e=Object(h.a)(i);function i(t){var s;return Object(n.a)(this,i),(s=e.call(this,t)).canvasRef=c.a.createRef(),s.imgs=[f.a,m.a,g.a,y.a,x.a],s.sounds=[S.a,A.a],s.state={gap:80,gravity:1.7},s.keyDownPressHandler=s.keyDownPressHandler.bind(Object(a.a)(s)),s.startAnimationLoop=s.startAnimationLoop.bind(Object(a.a)(s)),s}return Object(s.a)(i,[{key:"componentDidMount",value:function(){var t=this;this.initCtx(),this.setStarterVals();var e=this.initSceneObjs();Promise.all(e).then((function(){t.initSceneSounds(),t.startAnimationLoop(),window.addEventListener("keydown",t.keyDownPressHandler),t.canvasRef.current.addEventListener("touchstart",t.keyDownPressHandler)}))}},{key:"initCtx",value:function(){this.ctx=this.canvasRef.current.getContext("2d")}},{key:"setStarterVals",value:function(){this.bX=10,this.bY=150,this.scoreCount=0,this.pipe=[],this.pipe[0]={x:this.canvasRef.current.width,y:0}}},{key:"initSceneObjs",value:function(){var t=this,e=[];return this.imgs.forEach((function(i){var n=t.getName(i);t[n]=new Image,t[n].src=i,e.push(t[n]),t[n].onload=function(){return Promise.resolve()}})),e}},{key:"initSceneSounds",value:function(){var t=this;this.sounds.forEach((function(e){return t[t.getName(e)]=new Audio(e)}))}},{key:"getName",value:function(t){return t.split("/").pop().split(".").shift()}},{key:"keyDownPressHandler",value:function(){this.bY-=30,this.fly.play()}},{key:"startAnimationLoop",value:function(){this.ctx.drawImage(this.bg,0,0);for(var t=0;t<this.pipe.length;t++){var e=this.pipeNorth.height+this.state.gap;if(this.ctx.drawImage(this.pipeNorth,this.pipe[t].x,this.pipe[t].y),this.ctx.drawImage(this.pipeSouth,this.pipe[t].x,this.pipe[t].y+e),this.pipe[t].x--,125===this.pipe[t].x&&this.pipe.push({x:this.canvasRef.current.width,y:Math.floor(Math.random()*this.pipeNorth.height)-this.pipeNorth.height}),this.bX+this.bird.width>=this.pipe[t].x&&this.bX<=this.pipe[t].x+this.pipeNorth.width&&(this.bY<=this.pipe[t].y+this.pipeNorth.height||this.bY+this.bird.height>=this.pipe[t].y+e)||this.bY+this.bird.height>=this.canvasRef.current.height-this.fg.height)throw window.cancelAnimationFrame(this.requestID),this.setStarterVals(),this.startAnimationLoop(),"End of the game";5===this.pipe[t].x&&(this.scoreCount++,this.score.play())}this.ctx.drawImage(this.fg,0,this.canvasRef.current.height-this.fg.height),this.ctx.drawImage(this.bird,this.bX,this.bY),this.bY+=this.state.gravity,this.ctx.fillStyle="#000",this.ctx.font="16px Century Gothic",this.ctx.fillText("Score: ".concat(this.scoreCount),10,this.canvasRef.current.height-20),this.requestID=window.requestAnimationFrame(this.startAnimationLoop)}},{key:"componentWillUnmount",value:function(){this.removeEventListeners()}},{key:"removeEventListeners",value:function(){window.removeEventListener("keydown",this.keyDownPressHandler),this.canvasRef.current.removeEventListener("touchstart",this.keyDownPressHandler),window.cancelAnimationFrame(this.requestID)}},{key:"render",value:function(){return c.a.createElement("canvas",{className:u.a.Scene,ref:this.canvasRef,width:"288",height:"512"})}}]),i}(o.Component)}}]);
//# sourceMappingURL=3.781f2ec2.chunk.js.map